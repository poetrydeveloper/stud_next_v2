–†–æ—É—Ç: /api/product-units/[id]/return
üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø—Ä–æ–¥–∞–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ - –ø–µ—Ä–µ–≤–æ–¥ –∏–∑ —Å—Ç–∞—Ç—É—Å–æ–≤ SOLD/CREDIT –æ–±—Ä–∞—Ç–Ω–æ –≤ IN_STORE —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –∫–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

üîß –ú–µ—Ç–æ–¥
PATCH /api/product-units/[id]/return
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –í–æ–∑–≤—Ä–∞—Ç –ø—Ä–æ–¥–∞–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥

üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
Path –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
id (number) - ID —Ç–æ–≤–∞—Ä–Ω–æ–π –µ–¥–∏–Ω–∏—Ü—ã

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
json
{
  "returnReason": string  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "–í–æ–∑–≤—Ä–∞—Ç —Ç–æ–≤–∞—Ä–∞"
}
üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
1. –í–∞–ª–∏–¥–∞—Ü–∏—è:
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —é–Ω–∏—Ç–∞

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ —é–Ω–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å–µ SOLD –∏–ª–∏ CREDIT

2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞:
typescript
// –î–æ:
statusProduct: "SOLD" | "CREDIT"

// –ü–æ—Å–ª–µ:
statusProduct: "IN_STORE"
salePrice: null
soldAt: null  
isCredit: false
customerId: null
3. –ö–∞—Å—Å–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è:
–¢–æ–ª—å–∫–æ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂ (SOLD —Å —Ü–µ–Ω–æ–π)

–°–æ–∑–¥–∞–µ—Ç CashEvent –≤–æ–∑–≤—Ä–∞—Ç–∞ —á–µ—Ä–µ–∑ CashEventService

–î–ª—è –∫—Ä–µ–¥–∏—Ç–æ–≤ (CREDIT) –∫–∞—Å—Å–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–∏—á–∏–Ω—É –≤–æ–∑–≤—Ä–∞—Ç–∞

–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏ —Ü–µ–Ω—É

üìä –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:
json
{
  "ok": true,
  "data": { /* –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π ProductUnit */ },
  "message": "–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ –≤–æ–∑–≤—Ä–∞—â–µ–Ω"
}
‚ùå –û—à–∏–±–∫–∏:
json
// 404 - –Æ–Ω–∏—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
{
  "ok": false,
  "error": "–¢–æ–≤–∞—Ä–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
}

// 400 - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
{
  "ok": false, 
  "error": "–ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ–¥–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä"
}

// 500 - –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
{
  "ok": false,
  "error": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏"
}
üí∞ –ö–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
–°–æ–∑–¥–∞–µ—Ç—Å—è CashEvent –¥–ª—è:
–û–±—ã—á–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂ (SOLD —Å salePrice > 0)

–¢–∏–ø: RETURN

–°—É–º–º–∞: –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è (–≤–æ–∑–≤—Ä–∞—Ç –¥–µ–Ω–µ–≥)

–ù–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–ª—è:
–ö—Ä–µ–¥–∏—Ç–æ–≤ (CREDIT)

–ü—Ä–æ–¥–∞–∂ —Å –Ω—É–ª–µ–≤–æ–π —Ü–µ–Ω–æ–π

üéØ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
–°–±—Ä–∞—Å—ã–≤–∞–µ–º—ã–µ –ø–æ–ª—è:
salePrice - –æ–±–Ω—É–ª—è–µ—Ç—Å—è

soldAt - –æ–±–Ω—É–ª—è–µ—Ç—Å—è

isCredit - —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ false

customerId - –æ—Ç–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç

–°–æ—Ö—Ä–∞–Ω—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:
–ü—Ä–∏—á–∏–Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –ª–æ–≥–∞—Ö

–ü—Ä–µ–¥—ã–¥—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏ —Ü–µ–Ω–∞ –≤ meta

‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è
–î–≤–∞ —Ç–∏–ø–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤: –û–±—ã—á–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏ vs –∫—Ä–µ–¥–∏—Ç—ã

–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—á–µ—Ç: –¢–æ–ª—å–∫–æ –¥–ª—è –¥–µ–Ω–µ–∂–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂ —Å–æ–∑–¥–∞—é—Ç—Å—è CashEvent

–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å: –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–¥–∞–∂–µ –æ—á–∏—â–∞—é—Ç—Å—è

–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
–ü—Ä—è–º–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è: PATCH /api/product-units/[id] —Å action: "sell"

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π return: –¢–æ—Ç –∂–µ endpoint –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–π PATCH

–ö–∞—Å—Å–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CashEventService

üîÑ –°—Ç–∞—Ç—É—Å–Ω–∞—è –º–æ–¥–µ–ª—å
text
IN_STORE ‚Üí [SALE/CREDIT] ‚Üí IN_STORE
            ‚Üë
         RETURN
–ö—Ä–µ–¥–∏—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –±–µ–∑ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π