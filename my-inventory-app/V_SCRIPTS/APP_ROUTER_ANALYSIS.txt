# üïµÔ∏è‚Äç‚ôÇÔ∏è –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó NEXT.JS APP ROUTER –ü–†–û–ï–ö–¢–ê

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ: 21.11.2025, 09:21:06
–°—Ç—Ä—É–∫—Ç—É—Ä–∞: App Router (Next.js 13+)

## üóÑÔ∏è PRISMA –°–•–ï–ú–ê

**–§–∞–π–ª:** prisma/schema.prisma
**–ú–æ–¥–µ–ª–∏:** 18

### Supplier
**–ü–æ–ª—è:** 4
**–ö–ª—é—á–µ–≤—ã–µ:** id, name

### Customer
**–ü–æ–ª—è:** 4
**–ö–ª—é—á–µ–≤—ã–µ:** id

### User
**–ü–æ–ª—è:** 4
**–ö–ª—é—á–µ–≤—ã–µ:** id, email

### Category
**–ü–æ–ª—è:** 11
**–ö–ª—é—á–µ–≤—ã–µ:** id, name, path, node_index, parent

### Brand
**–ü–æ–ª—è:** 7
**–ö–ª—é—á–µ–≤—ã–µ:** id, name, slug

### Product
**–ü–æ–ª—è:** 12
**–ö–ª—é—á–µ–≤—ã–µ:** id, code, category, brandId, spineId

### ProductImage
**–ü–æ–ª—è:** 7
**–ö–ª—é—á–µ–≤—ã–µ:** id, productId

### DisassemblyScenario
**–ü–æ–ª—è:** 6
**–ö–ª—é—á–µ–≤—ã–µ:** id, productUnits

### ProductUnit
**–ü–æ–ª—è:** 35
**–ö–ª—é—á–µ–≤—ã–µ:** id, serialNumber, productId, spineId, parentProductUnitId

### CashDay
**–ü–æ–ª—è:** 8
**–ö–ª—é—á–µ–≤—ã–µ:** id, date

### CashEvent
**–ü–æ–ª—è:** 11
**–ö–ª—é—á–µ–≤—ã–µ:** id, cashDay, productUnit

### Spine
**–ü–æ–ª—è:** 10
**–ö–ª—é—á–µ–≤—ã–µ:** id, name, categoryId, node_index

### ProductUnitLog
**–ü–æ–ª—è:** 5
**–ö–ª—é—á–µ–≤—ã–µ:** id, productUnitId

### InventorySnapshot
**–ü–æ–ª—è:** 9
**–ö–ª—é—á–µ–≤—ã–µ:** id, productUnitId, createdAt

### ProductSalesHistory
**–ü–æ–ª—è:** 9
**–ö–ª—é—á–µ–≤—ã–µ:** id, productUnitId, cashEventId, createdAt

### InventoryForecast
**–ü–æ–ª—è:** 6
**–ö–ª—é—á–µ–≤—ã–µ:** id, productUnitId, updatedAt

### ReorderPoint
**–ü–æ–ª—è:** 6
**–ö–ª—é—á–µ–≤—ã–µ:** id, productUnitId, updatedAt

### StockTrafficLight
**–ü–æ–ª—è:** 10
**–ö–ª—é—á–µ–≤—ã–µ:** id, productCode, categoryId

## üöÄ API ROUTES (App Router)

**–í—Å–µ–≥–æ endpoints:** 42

### üì¶ PRODUCT UNITS API (15)
- **/api/product-units/by-product-code** [GET] - API endpoint
- **/api/product-units/create** [POST] - API endpoint
- **/api/product-units/page-data** [GET] - API endpoint
- **/api/product-units/request** [POST] - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫
- **/api/product-units/revert-to-request** [POST] - –°–∫–ª–∞–¥—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **/api/product-units** [GET,PATCH] - API endpoint
- **/api/product-units/search** [GET] - –°–∫–ª–∞–¥—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **/api/product-units/:id/delivery** [PATCH] - –°–∫–ª–∞–¥—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **/api/product-units/:id/logs** [GET] - API endpoint
- **/api/product-units/:id/return** [PATCH] - –ü—Ä–æ–¥–∞–∂–∏
- **/api/product-units/:id** [GET,PATCH] - –ü—Ä–æ–¥–∞–∂–∏
- **/api/product-units/:id/sale** [PATCH] - –ü—Ä–æ–¥–∞–∂–∏
- **/api/product-units/:id/sprout** [POST] - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏
- **/api/product-units/:id/status** [POST] - API endpoint
- **/api/product-units/:id/toggle-candidate** [POST] - API endpoint
  ‚ö†Ô∏è –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

### üìä INVENTORY API (0)

### üîß –î–†–£–ì–ò–ï API (10)
- **/api/brands**
- **/api/miller/root**
- **/api/spines/category/:categoryId**
- **/api/spines**
- **/api/spines/simple**
- **/api/spines/stats**
- **/api/spines/tree**
- **/api/spines/:id**
- **/api/store**
- **/api/suppliers**

## üìÑ –°–¢–†–ê–ù–ò–¶–´ (App Router)

**–í—Å–µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü:** 7

### /miller-columns
**–§–∞–π–ª:** app\miller-columns\page.tsx
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** MillerColumns, ProductMovementDashboard
**Hooks:** useState

### /miller-full
**–§–∞–π–ª:** app\miller-full\page.tsx
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** FullDataMillerColumns

### /
**–§–∞–π–ª:** app\page.tsx
**Hooks:** useState

### /products/new
**–§–∞–π–ª:** app\products\new\page.tsx
**Hooks:** useState, useEffect, useRouter

### /products
**–§–∞–π–ª:** app\products\page.tsx
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** ProductCard

### /products/:id/edit
**–§–∞–π–ª:** app\products\[id]\edit\page.tsx
**Hooks:** useState, useEffect, useRouter

### /products/:id
**–§–∞–π–ª:** app\products\[id]\page.tsx

## ‚öõÔ∏è REACT –ö–û–ú–ü–û–ù–ï–ù–¢–´

**–í—Å–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:** 29

### üì¶ PRODUCT UNIT –ö–û–ú–ü–û–ù–ï–ù–¢–´ (1)
- **CurrentUnitsSnapshot** - React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

### üìä INVENTORY –ö–û–ú–ü–û–ù–ï–ù–¢–´ (0)

### üîß –î–†–£–ì–ò–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ (24)
- **CategoryCell**
- **Column**
- **MillerColumns**
- **FormActions**
- **FormFields**
- **ImageSection**
- **ProductForm**
- **ProductCell**
- **cellComponents**
- **createButtons**
- ... –∏ –µ—â–µ 14 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üõ†Ô∏è –ë–ò–ë–õ–ò–û–¢–ï–ö–ò –ò –°–ï–†–í–ò–°–´

### üìÅ app/lib/ (5)
- **CategoryMigrationService.ts** - –†–∞–±–æ—Ç–∞ —Å –ë–î
- **NodeIndexService.ts** - –†–∞–±–æ—Ç–∞ —Å –ë–î
- **SpineProductMigrationService.ts** - –†–∞–±–æ—Ç–∞ —Å –ë–î
- **prisma.ts** - –†–∞–±–æ—Ç–∞ —Å –ë–î
- **prismaLogMiddleware.ts** - –†–∞–±–æ—Ç–∞ —Å –ë–î

### üìÅ lib/ (1)
- **translit.ts** - –°–µ—Ä–≤–∏—Å/—É—Ç–∏–ª–∏—Ç–∞

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ò –í–´–í–û–î–´

### üéØ –û–°–ù–û–í–ù–´–ï –í–´–í–û–î–´:
- ‚úÖ –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Next.js App Router
- ‚úÖ –•–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞–º–∏
- ‚úÖ –†–∞–∑–≤–∏—Ç–∞—è API –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –†–ê–ó–†–ê–ë–û–¢–ö–ï:
1. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** - –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –≤ ProductUnit
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è API** - –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤–æ –≤—Å–µ—Ö endpoints
3. **–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ—Ä–º–∞—Ç–∏–≤—ã –æ—Å—Ç–∞—Ç–∫–æ–≤
4. **–ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞** - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö –≤ CreateRequestModal
5. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** - —É–ª—É—á—à–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π

### üöÄ –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ó–ê–î–ê–ß–ò:
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞—è–≤–æ–∫ (—Ü–µ–Ω–∞/–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–µ–¥–∞–≤–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –Ω–æ—Ä–º–∞—Ç–∏–≤–æ–≤ –æ—Å—Ç–∞—Ç–∫–æ–≤
- –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤ API
